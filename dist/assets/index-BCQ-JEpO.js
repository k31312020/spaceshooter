var H=Object.defineProperty;var K=(t,s,e)=>s in t?H(t,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[s]=e;var i=(t,s,e)=>(K(t,typeof s!="symbol"?s+"":s,e),e);(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))o(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&o(h)}).observe(document,{childList:!0,subtree:!0});function e(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function o(l){if(l.ep)return;l.ep=!0;const u=e(l);fetch(l.href,u)}})();const b=14,V=3,D="GAMEOVER",v="../public/bullet_1.png",B={score:0,health:V,enemySpeed:1,bulletSpeed:20,gameInSession:!1,gameOver:!1,fps:60,menuPosition:0,paused:!1},x=t=>({x:t.width*.1+Math.random()*t.width*.7,y:-Math.random()*t.height*2}),M=t=>`../public/ship_${t}.png`,F=(t,s)=>{for(let e=0;e<t.length;e++)t[e].collided=!!t.find(o=>(t[e].x<o.x&&t[e].x+t[e].sprite.width>o.x&&t[e].y<o.y&&t[e].y+t[e].sprite.height>o.y||t[e].x>o.x&&t[e].x<o.x+o.sprite.width&&t[e].y>o.y&&t[e].y<o.y+o.sprite.height)&&t[e].targets.includes(o.objectType)),t[e].outOfBounds=t[e].checkBounds({top:0,bottom:s.height})},L=(t,s)=>t+Math.floor(Math.random()*s),a=(t,s)=>{const e=document.querySelector(t);e.style.display=s},w=(t,s)=>{t.fillStyle=s.fillStyle,t.font=s.font;const e=t.measureText(s.message).width;t.fillText(s.message,s.xPosition-(s.center?e/2:0),s.yPosition)},P=t=>document.querySelector(t).style.display!=="none";class k{constructor(s,e,o,l,u){i(this,"x");i(this,"y");i(this,"sprite");i(this,"collided",!1);i(this,"outOfBounds",!1);i(this,"objectType",null);i(this,"targets",[]);i(this,"getPosition",()=>({x:this.x,y:this.y}));i(this,"setSprite",s=>{const e=new Image;return e.src=s,e});i(this,"setPosition",({x:s,y:e})=>{this.x=s,this.y=e});i(this,"render",s=>{s.drawImage(this.sprite,this.x,this.y)});i(this,"checkBounds",s=>this.y<s.top||this.y>s.bottom);this.x=s,this.y=e,this.sprite=this.setSprite(o),this.objectType=l,this.targets=u}}class T extends k{constructor(s,e,o,l,u){super(s,e,o,l,u)}}class q extends k{constructor(e,o,l,u,h,y,S,g){super(e,o,l,u,h);i(this,"hit",!1);i(this,"destroyAnimation",0);i(this,"bullets",[]);i(this,"bulletSpriteLink");i(this,"bulletSoundPath");i(this,"collusionSoundPath");i(this,"health",3);i(this,"addBullet",()=>{if(this.bulletSoundPath){let e=new Audio;e.src=this.bulletSoundPath,e.play(),e.remove()}else throw console.error("!Cannot play sound, bullet sound path not set for ship object");if(this.bulletSpriteLink)this.bullets.push(new T(this.x+this.sprite.width/2,this.y,this.bulletSpriteLink,"player_bullet",["enemy"]));else throw console.error("!Cannot add bullets, bullet sprite path not set for ship object")});i(this,"update",(e,o)=>{this.collided&&this.handleCollusion(e),this.bullets.length&&this.updateBullets(o.bulletSpeed)});i(this,"handleCollusion",e=>{this.resetObject(e),this.checkBounds({top:0,bottom:e.height})||this.playCollusionSound()});i(this,"resetObject",e=>{this.collided=!1,this.health--});i(this,"playCollusionSound",()=>{if(this.collusionSoundPath){const e=new Audio;e.src=this.collusionSoundPath,e.play(),e.remove()}else throw console.error("!Cannot play sound, collusion sound path not set for ship object")});i(this,"updateBullets",e=>{this.bullets=this.bullets.filter(o=>!o.collided&&!o.outOfBounds);for(let o=0;o<this.bullets.length;o++)this.bullets[o].y-=e});i(this,"checkBounds",e=>this.y>e.bottom);this.bulletSoundPath=y,this.collusionSoundPath=S,this.bulletSpriteLink=g}}class N extends q{constructor(e,o,l,u,h,y,S,g,U){super(e,o,l,u,h,y,S,g);i(this,"weaponCoolDownTime",L(30,80));i(this,"weaponsActivated",!1);i(this,"update",(e,o)=>{this.y+=o.enemySpeed,this.weaponCoolDownTime--,this.outOfBounds&&this.resetObject(e),this.collided&&(o.score++,this.handleCollusion(e)),this.weaponCoolDownTime===0&&this.weaponsActivated&&this.addBullet(),this.bullets.length&&this.updateBullets(o.bulletSpeed)});i(this,"addBullet",()=>{if(this.bulletSpriteLink)this.weaponCoolDownTime=60,this.bullets.push(new T(this.x+this.sprite.width/2,this.y+this.sprite.height,this.bulletSpriteLink,"enemy_bullet",["player"]));else throw console.error("!Cannot add bullets, bullet sprite path not set for ship object")});i(this,"updateBullets",e=>{this.bullets=this.bullets.filter(o=>!o.collided&&!o.outOfBounds);for(let o=0;o<this.bullets.length;o++)this.bullets[o].y+=e});i(this,"resetObject",e=>{this.collided=!1,this.outOfBounds=!1,this.setPosition(x(e))});this.weaponsActivated=U||!1}}const Y="data:image/png;base64,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",R="/assets/explosion-6055-qrEiVMsm.mp3",I="/assets/bullet_1_sound-BGjcVUJ6.wav",W="/assets/mech-keyboard-02-102918-9cl0uJAK.mp3",Z="/assets/stardust-danijel-zambo-main-version-03-13-1372-BCnDX3ID.mp3";let O=[],n={...B};const C=new Image;C.src=Y;const f=new Audio;f.src=W;const c=new Audio;c.src=Z;c.loop=!0;let E=0;const r=document.createElement("canvas");document.querySelector("#app").appendChild(r);const p=r.getContext("2d",{willReadFrequently:!0});r.width=window.innerWidth;r.height=window.innerHeight;let m=[],d;const z=()=>{d=new q(r.width/2,r.height*.9,M(0),"player",["enemy","enemy_bullet"],I,R,v)},J=()=>{_(),A()},Q=t=>{switch(t){case"ArrowUp":n.menuPosition=n.menuPosition===0?2:n.menuPosition-1;break;case"ArrowDown":n.menuPosition=n.menuPosition===2?0:n.menuPosition+1;break;case"Enter":if(n.menuPosition===0)ue();else if(n.menuPosition===1){a(".game-menu","none"),a(".leaderboard","block");const e=document.querySelector("tbody");e.innerHTML="",O.forEach(o=>{e.innerHTML+=`<tr><td>${o.name}</td><td>${o.score}</td></tr>`})}else n.menuPosition===2&&(a(".game-menu","none"),a(".credits","block"));break;default:return}f.load(),f.play(),document.querySelectorAll(".menu-arrow").forEach((e,o)=>{e.innerHTML=o===n.menuPosition?">":"&nbsp"})},_=()=>{var t;document.addEventListener("keydown",s=>{if(P(".game-menu"))return Q(s.code);s.code==="Enter"&&P(".score-input")?ce():s.code==="Escape"&&n.gameInSession?j():s.code==="Escape"&&!n.gameInSession&&(a(".game-menu","flex"),n.menuPosition===1?a(".leaderboard","none"):n.menuPosition===2&&a(".credits","none"))}),(t=document.querySelector("#score-input"))==null||t.addEventListener("input",()=>{!n.gameInSession&&n.gameOver&&(f.load(),f.play())}),document.addEventListener("contextmenu",s=>s.preventDefault()),r.addEventListener("mousemove",s=>{n.gameInSession&&d.setPosition({x:s.clientX,y:d.y})}),r.addEventListener("click",()=>{n.gameInSession&&$()})},j=()=>{n.paused=!n.paused,n.paused?(c.pause(),ae(),clearInterval(E)):(c.play(),X())},$=()=>d.addBullet(),ee=t=>{m=[];for(let s=0;s<t;s++){const{x:e,y:o}=x(r),l=L(1,5);m.push(new N(e,o,M(l),"enemy",["player","player_bullet"],I,R,v,l===4))}},te=()=>{for(let t=0;t<b;t++)m[t].update(r,n)},se=()=>{ie(),d.health>0?ne():(n.gameInSession=!1,oe())},oe=()=>{w(p,{fillStyle:"white",font:"100px Pixelify Sans",message:D,xPosition:r.width/2,yPosition:r.height/2,center:!0}),setTimeout(()=>he(),3e3)},ne=()=>{for(let t=1;t<=d.health;t++)p.drawImage(C,r.width-t*50,r.height*.06)},ie=()=>{w(p,{fillStyle:"white",font:"30px Pixelify Sans",message:n.score.toString(),xPosition:r.width*.05,yPosition:r.height*.1,center:!1})},A=()=>{p.fillStyle="black",p.fillRect(0,0,r.width,r.height)},G=()=>{A();const t=[...m,d,...d.bullets,...m.flatMap(s=>s.weaponsActivated?s.bullets:[])];for(let s=0;s<t.length;s++)t[s].render(p);se(),requestAnimationFrame(()=>{n.gameInSession&&!n.paused&&G()})},le=()=>{n.enemySpeed+=1e-4},re=()=>{const t=[...m,d,...d.bullets,...m.flatMap(s=>s.weaponsActivated?s.bullets:[])];F(t,r),te(),le(),d.update(r,n)},ue=()=>{ee(b),z(),n.gameInSession=!0,a(".game-menu","none"),c.volume=.6,c.load(),c.play(),X()},X=()=>{E=setInterval(()=>{n.paused&&!n.gameInSession||re()},1e3/n.fps),G()},ae=()=>{w(p,{fillStyle:"white",font:"100px Pixelify Sans",message:"Paused",xPosition:r.width/2,yPosition:r.height/2,center:!0})},de=()=>{a(".score-input","block"),document.querySelector("#score-input").focus()},ce=()=>{const t=document.querySelector("#score-input");t.value.length===4&&(n.gameOver=!0,O.push({name:t.value.toUpperCase(),score:n.score}),n.gameOver=!1,n.score=0,a(".score-input","none"),a(".game-menu","flex"))},he=()=>{c.pause(),clearInterval(E),A(),n={...B,score:n.score,gameOver:!0},de()};J();
